1
00:00:00,000 --> 00:00:08,260
До сих пор вы изучили много концепций.

2
00:00:08,260 --> 00:00:13,000
Вы знаете многие команды Linux, мы изучали скрипты и так далее.

3
00:00:13,000 --> 00:00:18,440
Мы также узнали, что в среде Linux может быть несколько пользователей, и эти пользователи

4
00:00:18,440 --> 00:00:24,560
могут запускать программы и процессы, а также выполнять разные команды и т.д.

5
00:00:24,560 --> 00:00:29,480
На самом деле, несколько пользователей могут быть и в других операционных системах.

6
00:00:29,480 --> 00:00:31,560
Например, Windows или macOS.

7
00:00:31,560 --> 00:00:38,280
Так что такая многопользовательская среда очень распространена во всех операционных системах.

8
00:00:38,280 --> 00:00:44,480
У каждого пользователя есть своя среда, где он работает и запускает программы.

9
00:00:44,480 --> 00:00:51,040
И, как вы знаете, как пользователь вы можете настроить свое пространство, по сути свою учетную запись в

10
00:00:51,040 --> 00:00:54,240
системе, задавая разные настройки.

11
00:00:54,240 --> 00:00:58,960
Возможно, вам нужен определенный графический интерфейс.

12
00:00:58,960 --> 00:01:02,120
Хотите крупнее шрифт, другие цвета.

13
00:01:02,120 --> 00:01:04,000
Все это можно настроить.

14
00:01:04,000 --> 00:01:10,440
Возможно, вы хотите другой shell, а не стандартный bash.

15
00:01:10,440 --> 00:01:14,720
Хотите настроить редактор по умолчанию для открытия файлов.

16
00:01:14,720 --> 00:01:19,240
Или, возможно, хотите задать веб-браузер, который будет использоваться по умолчанию для открытия

17
00:01:19,240 --> 00:01:20,240
сайтов.

18
00:01:20,240 --> 00:01:27,760
Все это можно настроить в операционной системе, будь то Linux, Windows или что-то еще.

19
00:01:27,760 --> 00:01:33,040
Когда вы меняете конфигурацию ОС и задаете предпочтения,

20
00:01:33,040 --> 00:01:38,880
конечно, вы не хотите, чтобы ваша конфигурация влияла на других пользователей системы.

21
00:01:38,880 --> 00:01:42,120
Потому что у них могут быть свои предпочтения.

22
00:01:42,120 --> 00:01:48,120
Поэтому эти среды, пользовательские окружения, конфигурации и настройки должны

23
00:01:48,120 --> 00:01:50,040
быть отделены друг от друга.

24
00:01:50,040 --> 00:01:56,280
Как же ОС отслеживает этих пользователей и их окружения?

25
00:01:56,280 --> 00:02:03,160
Где она хранит информацию о том, как каждый пользователь настроил свое пространство?

26
00:02:03,160 --> 00:02:08,480
Операционная система хранит эту информацию в так называемых переменных окружения,

27
00:02:08,480 --> 00:02:14,240
которые по сути представляют собой пары ключ-значение.

28
00:02:14,240 --> 00:02:17,280
В bash-скриптах вы изучали переменные.

29
00:02:17,280 --> 00:02:22,120
У нас есть имя переменной и значение, на которое ссылается имя.

30
00:02:22,120 --> 00:02:25,320
Именно так определяются переменные окружения.

31
00:02:25,320 --> 00:02:31,000
Но эти переменные окружения доступны для всей среды, а не только для одного конкретного

32
00:02:31,000 --> 00:02:32,920
скрипта.

33
00:02:32,920 --> 00:02:39,160
И ключи или имена этих переменных окружения по стандарту пишутся заглавными

34
00:02:39,160 --> 00:02:40,800
буквами.

35
00:02:40,800 --> 00:02:46,520
Например, у каждого пользователя есть набор переменных окружения, которые определяют настройки

36
00:02:46,520 --> 00:02:47,520
окружения пользователя.

37
00:02:47,520 --> 00:02:54,160
Например, переменная USER, значение которой — текущий вошедший пользователь.

38
00:02:54,160 --> 00:02:58,760
Или переменная HOME, указывающая на домашний каталог текущего пользователя.

39
00:02:58,760 --> 00:03:03,560
Есть и переменные, задающие предпочтения пользователя, например EDITOR — редактор файлов по

40
00:03:03,560 --> 00:03:06,560
умолчанию, используемый при открытии файла.

41
00:03:06,560 --> 00:03:10,520
Или SHELL — shell по умолчанию для пользователя.

42
00:03:10,520 --> 00:03:17,040
И, как мы узнали, по умолчанию Linux настраивает bash как shell по умолчанию.

43
00:03:17,040 --> 00:03:23,280
Но пользователь может изменить это на другой shell, например ZShell, верно?

44
00:03:23,280 --> 00:03:30,000
Тогда значение переменной окружения SHELL будет указывать на путь к ZShell.

45
00:03:30,000 --> 00:03:35,840
Как видите, пользователь может менять значения этих переменных окружения.

46
00:03:35,840 --> 00:03:40,360
То есть они заданы операционной системой, но вы можете их изменить.

47
00:03:40,360 --> 00:03:41,880
Поэтому мы называем их переменными.

48
00:03:41,880 --> 00:03:45,680
У них динамические значения, которые можно менять.

49
00:03:45,680 --> 00:03:53,560
Давайте посмотрим, как можно получить доступ к этим переменным в вашей системе.

50
00:03:53,560 --> 00:04:00,280
Есть команда для отображения всех переменных окружения, которые задает операционная система

51
00:04:00,280 --> 00:04:03,440
окружение этого пользователя.

52
00:04:03,440 --> 00:04:13,400
Эта команда — print, и если я её выполню, вы увидите список переменных окружения,

53
00:04:13,400 --> 00:04:17,920
кучу из них, которые система задала за нас.

54
00:04:17,920 --> 00:04:21,560
Мы можем открыть их с помощью программы less.

55
00:04:21,560 --> 00:04:25,680
Как мы узнали, мы можем примерно так их просматривать.

56
00:04:25,680 --> 00:04:30,120
И как видите, здесь куча разных переменных окружения, вам не обязательно понимать

57
00:04:30,120 --> 00:04:31,880
и знать каждую из них.

58
00:04:31,880 --> 00:04:34,620
Но вот некоторые из них, которые я уже упоминал.

59
00:04:34,620 --> 00:04:40,800
Есть переменная shell, указывающая на оболочку по умолчанию, сейчас это bash.

60
00:04:40,800 --> 00:04:46,520
Есть переменная окружения home, которая указывает на домашний каталог моего пользователя,

61
00:04:46,520 --> 00:04:48,420
а также имя пользователя.

62
00:04:48,420 --> 00:04:54,360
Есть language, которую я настроила для своей учётной записи, это английский.

63
00:04:54,360 --> 00:05:00,520
Есть linux user и так далее.

64
00:05:00,520 --> 00:05:06,880
Мы можем получать отдельные переменные окружения с помощью print и затем имени

65
00:05:06,880 --> 00:05:09,320
переменной, например user.

66
00:05:09,320 --> 00:05:12,680
И мы получаем значение этой переменной окружения.

67
00:05:12,680 --> 00:05:18,760
Так можно проверить текущее значение конкретной переменной окружения.

68
00:05:18,760 --> 00:05:26,800
Если у нас несколько переменных окружения с похожими именами, мы можем вывести их все

69
00:05:26,800 --> 00:05:30,680
используя команду grep вот так.

70
00:05:30,680 --> 00:05:31,840
Вот и всё.

71
00:05:31,840 --> 00:05:36,840
Вот так в общем мы выводим переменные окружения с помощью команды print.

72
00:05:36,840 --> 00:05:44,600
Однако переменные окружения могут использоваться программами или командами Linux, обращаясь к ним

73
00:05:44,600 --> 00:05:51,920
через синтаксис, который мы уже выучили в bash-скриптах: знак доллара и

74
00:05:51,920 --> 00:05:53,560
имя переменной.

75
00:05:53,560 --> 00:05:59,040
И, как я сказала, мы можем использовать такую ссылку на переменную в разных командах.

76
00:05:59,040 --> 00:06:06,280
Например, можно сделать echo и затем имя переменной, и мы получим её значение.

77
00:06:06,280 --> 00:06:11,600
Точно так же мы можем использовать переменные окружения или обращаться к ним в bash-скриптах,

78
00:06:11,600 --> 00:06:20,080
как к обычной переменной, которую вы определяете внутри скрипта.

79
00:06:20,080 --> 00:06:25,600
Как я сказала, операционная система создаёт эти переменные окружения, чтобы хранить информацию

80
00:06:25,600 --> 00:06:27,640
об окружении.

81
00:06:27,640 --> 00:06:32,800
Но это лишь один вариант использования переменных окружения в ОС, потому что

82
00:06:32,800 --> 00:06:35,680
у них много других применений.

83
00:06:35,680 --> 00:06:41,800
Например, мы можем создавать свои переменные окружения вдобавок к тем, что уже

84
00:06:41,800 --> 00:06:43,360
предоставляет система.

85
00:06:43,360 --> 00:06:45,200
Зачем нам это нужно?

86
00:06:45,200 --> 00:06:49,760
Какой смысл создавать свои переменные окружения?

87
00:06:49,760 --> 00:06:53,480
Представим программу, которую мы хотим запустить на операционной системе.

88
00:06:53,480 --> 00:06:58,920
Допустим, я хочу запустить приложение на Java или Python на Linux-сервере

89
00:06:58,920 --> 00:07:00,320
под своим пользователем.

90
00:07:00,320 --> 00:07:07,120
И этому приложению нужно подключиться к базе данных или внешнему API, например Google Maps,

91
00:07:07,120 --> 00:07:08,240
к примеру.

92
00:07:08,240 --> 00:07:15,840
Такие внешние сервисы, как базы данных, API и прочие, обычно требуют какого-то

93
00:07:15,840 --> 00:07:20,480
вида аутентификации, чтобы не каждый мог подключиться.

94
00:07:20,480 --> 00:07:26,880
Поэтому приложению, которое я создала и хочу запустить на сервере, понадобятся имя пользователя и

95
00:07:26,880 --> 00:07:30,080
пароль для доступа к базе данных.

96
00:07:30,080 --> 00:07:36,520
Или ему нужен будет секретный токен для подключения к Google Maps API, чтобы

97
00:07:36,520 --> 00:07:42,640
сервис понимал, что это то самое приложение, которому можно доверять.

98
00:07:42,640 --> 00:07:50,000
Так как же безопасно сообщить приложению, какими являются эти секретные значения?

99
00:07:50,000 --> 00:07:55,720
Какие учётные данные для базы данных или секретный токен для API?

100
00:07:55,720 --> 00:08:00,880
Ведь мы не можем просто записать эти значения в код приложения и проверить, что

101
00:08:00,880 --> 00:08:07,160
в кодовый репозиторий, потому что тогда другие люди могут легко это увидеть в репозитории

102
00:08:07,160 --> 00:08:09,960
к тому же оно будет в открытом виде.

103
00:08:09,960 --> 00:08:14,520
Это небезопасно, поэтому мы не можем помещать эту информацию в код.

104
00:08:14,520 --> 00:08:21,160
Итак, как хранить эти конфиденциальные данные безопасно, но так, чтобы приложение

105
00:08:21,160 --> 00:08:25,760
могло получить к ним доступ, когда запускается на сервере?

106
00:08:25,760 --> 00:08:33,720
Очень распространенный способ сделать это — задавать такие данные как переменные среды, чтобы

107
00:08:33,720 --> 00:08:38,040
приложение могло затем читать значения этих переменных среды.

108
00:08:38,040 --> 00:08:39,040
Как это работает?

109
00:08:39,040 --> 00:08:44,960
Мы просто создаем переменные среды вроде database underscore username или database

110
00:08:44,960 --> 00:08:51,920
underscore password, и снова это стандартное соглашение об именах переменных среды,

111
00:08:51,920 --> 00:08:56,120
все заглавными и подчеркивание для разделения слов.

112
00:08:56,120 --> 00:09:01,520
Итак, мы задаем эти переменные, и создав эти переменные среды в Linux

113
00:09:01,520 --> 00:09:09,480
например, на сервере, делаем их доступными в нашей среде или среде пользователя.

114
00:09:09,480 --> 00:09:15,640
А это значит, что они становятся доступны всем приложениям и процессам, которые мы

115
00:09:15,640 --> 00:09:17,880
запускаем в этой среде.

116
00:09:17,880 --> 00:09:23,080
Теперь вы, вероятно, спрашиваете, как приложение получает доступ к этим переменным среды?

117
00:09:23,080 --> 00:09:24,440
Как оно может их прочитать?

118
00:09:24,440 --> 00:09:25,840
Какой код для этого нужен?

119
00:09:25,840 --> 00:09:33,400
Заметьте, что у каждого языка программирования есть синтаксис или библиотека, позволяющая

120
00:09:33,400 --> 00:09:39,080
получать доступ или читать эти переменные из среды, в которой он работает.

121
00:09:39,080 --> 00:09:42,340
Так что любой язык программирования в целом это поддерживает.

122
00:09:42,340 --> 00:09:47,880
Создаваемые для приложения переменные среды нужны не только для хранения конфиденциальных

123
00:09:47,880 --> 00:09:53,480
данных, но и для повышения гибкости приложения.

124
00:09:53,480 --> 00:09:54,680
Что я имею в виду?

125
00:09:54,680 --> 00:09:58,960
Наше приложение, вероятно, будет работать на разных серверах.

126
00:09:58,960 --> 00:10:04,000
У нас может быть сервер разработки, то есть среда разработки для тестирования

127
00:10:04,000 --> 00:10:07,760
приложения, возможно, на стадии разработки.

128
00:10:07,760 --> 00:10:13,040
Затем может быть тестовый сервер, а потом боевой сервер, и каждая

129
00:10:13,040 --> 00:10:19,280
из этих сред — разработка, тест и прод — будет иметь свою базу данных.

130
00:10:19,280 --> 00:10:23,520
То есть у нас будет база для теста и база для продакшена.

131
00:10:23,520 --> 00:10:30,920
Продакшн-база будет иметь свои учетные данные, а внешние сервисы или API

132
00:10:30,920 --> 00:10:37,040
также получат продакшн-токен доступа и тестовый токен доступа.

133
00:10:37,040 --> 00:10:40,380
Это базовый стандарт при разработке приложений.

134
00:10:40,380 --> 00:10:45,600
Поэтому вместо того чтобы хардкодить эти значения в приложении, с помощью переменных среды

135
00:10:45,600 --> 00:10:52,160
можно динамически задавать разные значения для приложения и запускать его в разных

136
00:10:52,160 --> 00:10:54,840
средах без изменения кода.

137
00:10:54,840 --> 00:11:01,200
Когда приложение работает в среде разработки, можно дать ему учетные данные для

138
00:11:01,200 --> 00:11:02,880
базы разработки.

139
00:11:02,880 --> 00:11:08,480
Когда оно работает в продакшене, можно дать ему или передать через переменные среды

140
00:11:08,480 --> 00:11:12,760
данные для продакшн-базы и продакшн API-ключи.

141
00:11:12,760 --> 00:11:18,160
Это делает приложение гораздо более гибким, при этом храня всю эту конфиденциальную

142
00:11:18,160 --> 00:11:25,840
информацию безопасно на том сервере, где работает приложение, так что никто не сможет

143
00:11:25,840 --> 00:11:26,840
к ней получить доступ.

144
00:11:26,840 --> 00:11:31,920
Это похоже на передачу параметров приложению, как мы передавали параметры нашему Bash-

145
00:11:31,920 --> 00:11:32,960
скрипту.

146
00:11:32,960 --> 00:11:39,720
Как видите, переменные среды — очень важная концепция во всех операционных системах,

147
00:11:39,720 --> 00:11:45,200
и работает примерно одинаково, будь то Linux, Windows или macOS.

148
00:11:45,200 --> 00:11:50,720
Теперь давайте посмотрим, как создать собственные переменные среды.

149
00:11:50,720 --> 00:11:55,820
И это работает примерно одинаково во всех дистрибутивах Linux, так что ничего специфичного для

150
00:11:55,820 --> 00:11:57,120
Ubuntu здесь нет.

151
00:11:57,120 --> 00:12:05,080
Итак, сначала, чтобы создать переменную окружения, например db username, которая определяется

152
00:12:05,080 --> 00:12:10,360
именем переменной, опять же прописными буквами и подчёркиваниями, и значением.

153
00:12:10,360 --> 00:12:17,520
Значение — это фактическое имя пользователя в базе данных, его можно назвать db user или my app user

154
00:12:17,520 --> 00:12:18,520
как угодно.

155
00:12:18,520 --> 00:12:25,920
Однако чтобы система восприняла это как переменную окружения, нам нужно

156
00:12:25,920 --> 00:12:28,320
сделать что-то вроде export.

157
00:12:28,320 --> 00:12:36,520
То есть мы экспортируем переменную как переменную окружения, и именно это отличает её

158
00:12:36,520 --> 00:12:41,040
от обычных переменных, которые мы определяем, например, в Bash-скрипте, потому что обычные

159
00:12:41,040 --> 00:12:44,440
переменные доступны только в этом скрипте.

160
00:12:44,440 --> 00:12:48,600
Переменные окружения доступны во всём окружении, и для этого нам нужно

161
00:12:48,600 --> 00:12:52,400
делать export, а затем переменную.

162
00:12:52,400 --> 00:13:00,440
Мы можем также экспортировать db password, например, допустим, это секретное значение, которое никто

163
00:13:00,440 --> 00:13:01,440
не должен знать.

164
00:13:01,960 --> 00:13:10,280
Очень часто также задают и не такие чувствительные данные, как имя базы данных или URL, тоже как переменные окружения,

165
00:13:10,280 --> 00:13:17,200
вместо того чтобы жёстко прописывать их в коде, и, как я сказал, потому что таким образом мы

166
00:13:17,200 --> 00:13:23,960
можем запускать наше приложение в средах разработки, продакшена, тестирования без жёсткого прописывания этих

167
00:13:23,960 --> 00:13:26,680
значений внутри кода.

168
00:13:26,680 --> 00:13:34,320
Так что db name, потому что имя базы данных и URL базы данных на самом деле будут разными для продакшен

169
00:13:34,320 --> 00:13:38,680
базы и для базы разработки или тестирования.

170
00:13:38,680 --> 00:13:48,120
Так мы задаём переменные окружения в нашей Linux-среде, и теперь если я выведу и

171
00:13:48,760 --> 00:13:58,960
отфильтрую все переменные окружения, в которых есть db, с помощью команды grep, то

172
00:13:58,960 --> 00:14:05,480
вот, вывод переменных окружения, и три из них, которые мы здесь определили,

173
00:14:05,480 --> 00:14:06,880
есть в списке.

174
00:14:06,880 --> 00:14:12,040
Если снова захотим использовать их в других командах Linux, например, если хотим использовать их

175
00:14:12,040 --> 00:14:19,160
в bash-скрипте, где угодно, мы можем обратиться к ним с помощью знака доллара и имени переменной

176
00:14:19,160 --> 00:14:26,880
вот так, и опять же, поскольку это переменные, мы можем также менять значения этих переменных окружения

177
00:14:26,880 --> 00:14:29,000
после того как их определили.

178
00:14:29,000 --> 00:14:36,880
Так что, возможно, мы переименовали базу данных, и можем задать db name как new db name, что бы это ни было.

179
00:14:42,520 --> 00:14:49,400
И мы также можем убрать или, по сути, удалить переменную окружения из окружения

180
00:14:49,400 --> 00:14:57,680
с помощью команды unset и имени переменной вот так.

181
00:14:57,680 --> 00:15:02,680
Снова запускаем вывод, и готово.

182
00:15:02,680 --> 00:15:08,800
Итак, после того как мы задали те переменные окружения, которые приложение должно читать или

183
00:15:08,800 --> 00:15:16,520
к которым оно должно обращаться, чтобы подключиться к базе данных, мы можем запустить приложение в этой подготовленной

184
00:15:16,520 --> 00:15:23,240
среде, где мы создали переменные, и приложение сможет обратиться к

185
00:15:23,240 --> 00:15:24,640
этим значениям.

186
00:15:24,640 --> 00:15:30,120
И прямо здесь вы бы запустили своё Java-приложение или Python-приложение, или что бы то ни было.

187
00:15:30,120 --> 00:15:35,680
Однако есть один интересный момент при работе с переменными окружения или

188
00:15:35,680 --> 00:15:37,480
при их задании.

189
00:15:37,480 --> 00:15:49,840
Итак, я закрою этот терминал и открою его снова, выполню вывод и фильтр по нашим db

190
00:15:49,840 --> 00:15:56,120
значениям, и вы видите, что все переменные окружения, которые мы задали, на самом деле исчезли.

191
00:15:56,120 --> 00:15:57,720
Их больше нет.

192
00:15:57,720 --> 00:16:04,600
То есть, и это очень важная концепция, которую нужно знать: когда мы задаём переменные окружения

193
00:16:04,600 --> 00:16:11,960
с помощью команды export в интерфейсе командной строки, они доступны только

194
00:16:11,960 --> 00:16:15,440
в этой текущей сессии, по сути, да.

195
00:16:15,440 --> 00:16:22,840
То есть в окружении этой конкретной сессии, и как только мы закрываем терминал или даже если

196
00:16:22,840 --> 00:16:28,960
просто открываем новое окно в этом терминале, в той сессии эта переменная окружения уже

197
00:16:28,960 --> 00:16:30,720
будет недоступна.

198
00:16:30,720 --> 00:16:36,560
То есть это не постоянные переменные окружения, которые мы можем задать с помощью команды export.

199
00:16:36,560 --> 00:16:44,320
И как же нам задать переменные окружения постоянно, чтобы не терять их каждый раз, когда закрываем

200
00:16:44,320 --> 00:16:45,320
сессию.

201
00:16:45,320 --> 00:16:52,520
Ну для этого в домашнем каталоге каждого пользователя есть файл.

202
00:16:52,520 --> 00:16:59,160
Это домашний каталог моего текущего пользователя, и файл называется с точкой — это скрытый файл.

203
00:16:59,160 --> 00:17:02,240
bash RC.

204
00:17:02,240 --> 00:17:09,880
Итак, в домашнем каталоге пользователя есть файл, созданный или автоматически сгенерированный

205
00:17:09,880 --> 00:17:14,520
для shell-программы, которую ваш пользователь использует по умолчанию.

206
00:17:14,520 --> 00:17:20,160
В нашем случае мы используем программу bash, поэтому это bash RC, если вы используете, например

207
00:17:20,160 --> 00:17:25,000
Z shell, то это будет Z shell RC.

208
00:17:25,000 --> 00:17:31,680
То есть как бы ни называлась ваша shell-программа, у нее будет этот RC-файл, который содержит

209
00:17:31,680 --> 00:17:35,480
переменные окружения, специфичные для вашего пользователя.

210
00:17:35,480 --> 00:17:40,320
Если мы откроем его, тут вы увидите кучу кода.

211
00:17:40,320 --> 00:17:47,040
Итак, когда мы хотим навсегда добавить переменные, которые будут доступны во всех терминалах

212
00:17:47,040 --> 00:17:55,960
во всех сессиях нашего пользователя, нам нужно добавить их в этот файл или в этот RC-файл

213
00:17:55,960 --> 00:18:02,960
какой бы shell-программа ни была настроена как оболочка по умолчанию для вашего пользователя.

214
00:18:02,960 --> 00:18:16,560
Здесь, в конце файла, мы сделаем export DB username, а затем password

215
00:18:16,560 --> 00:18:22,720
какое-то секретное значение, не важно.

216
00:18:22,720 --> 00:18:29,120
Давайте также зададим DB name — вот и всё.

217
00:18:29,120 --> 00:18:34,680
Теперь можем закрыть это и сохранить изменения.

218
00:18:34,680 --> 00:18:40,560
Теперь нужно сделать ещё одну вещь, потому что если мы сейчас сделаем print и не

219
00:18:40,560 --> 00:18:42,440
видим значения пока.

220
00:18:42,440 --> 00:18:48,520
То есть мы добавили эти переменные окружения в наш файл bash RC, однако

221
00:18:48,520 --> 00:18:51,640
система пока не знает об изменениях.

222
00:18:51,640 --> 00:18:58,280
Мы как бы перезагружаем систему, чтобы принять изменения из того файла.

223
00:18:58,280 --> 00:19:04,480
И для этого мы делаем source bash RC.

224
00:19:04,480 --> 00:19:08,840
Мы говорим программе: эй, мы что-то изменили в том файле bash RC, пожалуйста, примените

225
00:19:08,840 --> 00:19:10,160
эти изменения.

226
00:19:10,160 --> 00:19:16,960
И теперь, если я сделаю print и снова — вот они, у нас есть значения переменных окружения.

227
00:19:16,960 --> 00:19:25,840
И теперь, если я закрою терминал, открою его снова и сделаю print, у нас есть значения

228
00:19:25,840 --> 00:19:27,120
доступны.

229
00:19:27,120 --> 00:19:33,720
Теперь любое приложение или программа, которую вы запускаете в любой сессии, эти переменные окружения

230
00:19:33,720 --> 00:19:41,760
всегда будут доступны для всех этих программ.

231
00:19:41,760 --> 00:19:47,080
В наших примерах мы создали переменные окружения для нашего пользователя, верно.

232
00:19:47,080 --> 00:19:51,320
То есть мы настроили окружение для одного конкретного пользователя.

233
00:19:51,320 --> 00:19:56,840
А что если мы хотим задать переменную окружения для всех пользователей системы.

234
00:19:56,840 --> 00:20:04,800
Помимо пользовательского файла bash RC или конфигурационного файла shell-программ

235
00:20:04,800 --> 00:20:12,480
в домашнем каталоге каждого пользователя, у нас есть и системный файл переменных окружения, который

236
00:20:12,480 --> 00:20:21,160
находится в каталоге /etc, где хранится системная конфигурация,

237
00:20:21,160 --> 00:20:24,480
и файл называется environment.

238
00:20:24,480 --> 00:20:30,440
Если я открою этот файл, вы увидите, что здесь уже настроена одна переменная окружения

239
00:20:30,440 --> 00:20:32,140
под названием path.

240
00:20:32,140 --> 00:20:38,760
Это глобально установленная переменная окружения path, которая имеет одно и то же значение для всех

241
00:20:38,760 --> 00:20:40,920
пользователей системы.

242
00:20:40,920 --> 00:20:44,080
Так что же это за переменная path.

243
00:20:44,080 --> 00:20:50,800
По сути это список каталогов с исполняемыми или бинарными файлами.

244
00:20:50,800 --> 00:20:55,960
Поэтому вы видите бинарные папки в конце каждого пути.

245
00:20:55,960 --> 00:21:03,400
У нас есть usr/local/sbin, usr/local/bin и т.д., и каждый каталог разделяется двоеточием

246
00:21:03,400 --> 00:21:10,760
так что это, по сути, просто список, и работает это так: когда мы выполняем команду

247
00:21:10,760 --> 00:21:17,480
или программу в интерфейсе командной строки, система проверяет все эти места, указанные

248
00:21:17,480 --> 00:21:24,320
в переменной path, чтобы найти бинарный файл этой команды или программы и выполнить его

249
00:21:24,320 --> 00:21:25,320
оттуда.

250
00:21:25,320 --> 00:21:32,720
Это означает, что когда мы устанавливаем новое ПО, например Java, Python или Node.js, что бы оно ни было.

251
00:21:32,720 --> 00:21:38,820
двоичные файлы этого ПО будут добавлены в одну из этих локаций, и поэтому

252
00:21:38,820 --> 00:21:46,320
мы можем выполнять команды Java, Python и т.д. в интерфейсе командной строки, потому что система

253
00:21:46,320 --> 00:21:50,920
знает, где находятся бинарники этой команды.

254
00:21:50,920 --> 00:21:58,520
И давайте выйдем из файла без сохранения изменений двоеточие q восклицательный знак

255
00:21:58,520 --> 00:21:59,640
просто выходим.

256
00:21:59,640 --> 00:22:05,160
В общем, PATH — очень важная переменная, потому что благодаря этой переменной PATH нам не

257
00:22:05,160 --> 00:22:14,800
нужно делать это каждый раз, когда мы хотим использовать команду ls, например, вместо этого мы можем просто

258
00:22:14,800 --> 00:22:16,080
ввести ls.

259
00:22:16,080 --> 00:22:24,960
То есть когда мы вводим ls, система смотрит в списке директорий переменной PATH

260
00:22:24,960 --> 00:22:32,800
бинарный файл команды ls, и это значит, что если мы создадим исполняемую программу и пропишем

261
00:22:32,800 --> 00:22:40,000
ее расположение в переменную PATH, то, добавив путь сюда, мы сможем запускать команду

262
00:22:40,000 --> 00:22:47,600
для выполнения этой программы прямо так из любого места в нашей файловой системе, и поскольку

263
00:22:47,600 --> 00:22:54,160
PATH — глобальная переменная окружения, заданная для всех пользователей, она будет доступна

264
00:22:54,160 --> 00:23:00,080
всем пользователям системы.

265
00:23:00,080 --> 00:23:07,240
Будет интересно попробовать один пример, давайте посмотрим, как можно добавить свою команду

266
00:23:07,240 --> 00:23:16,840
или программу в исполняемый PATH, создадим очень простой welcome-скрипт, и мы

267
00:23:16,840 --> 00:23:28,200
уже знаем синтаксис: шебанг в начале, а потом давайте просто

268
00:23:28,200 --> 00:23:40,680
добавим строку echo "welcome to devops bootcamp" и переменную окружения пользователя, и вы видите

269
00:23:40,680 --> 00:23:46,680
что здесь нет подсветки синтаксиса — этой красивой shell/bash подсветки

270
00:23:46,680 --> 00:23:55,000
потому что я создал файл без расширения, просто welcome без .sh, поэтому так, но

271
00:23:55,000 --> 00:24:01,560
это неважно, потому что это простой пример с echo, и теперь, как вы помните, нам нужно

272
00:24:01,560 --> 00:24:12,360
сделать файл welcome исполняемым, поэтому мы добавляем права на исполнение для всех пользователей этого

273
00:24:12,360 --> 00:24:23,320
скрипта welcome вот так, и теперь можем добавить расположение этого исполняемого файла в переменную PATH

274
00:24:23,320 --> 00:24:31,080
либо глобально, как видели ранее, или — и это тоже интересный кейс —

275
00:24:31,080 --> 00:24:37,320
добавить этот путь в PATH только для нашего пользователя. Как это сделать? Вместо изменения

276
00:24:37,320 --> 00:24:43,800
глобального файла окружения мы изменим это в нашем файле bashrc

277
00:24:45,240 --> 00:24:52,600
здесь у нас нет переменной PATH, так что как мы это делаем? Просто пишем PATH equals

278
00:24:53,480 --> 00:24:59,320
а затем можем сослаться на существующую переменную PATH, доступную всем пользователям,

279
00:24:59,320 --> 00:25:08,040
и добавим slash home slash nano — это каталог, где наша команда welcome или welcome

280
00:25:08,040 --> 00:25:17,400
программа находится, так что нам всегда нужен путь к каталогу. То есть снова мы берём

281
00:25:17,400 --> 00:25:23,400
значение переменной PATH, которое является списком всех директорий, и затем мы

282
00:25:23,400 --> 00:25:30,760
добавляем в конец путь к своим скриптам и сохраняем обратно как переменную PATH

283
00:25:30,760 --> 00:25:35,960
для системы. И мы не пишем export здесь, потому что переменная PATH уже существует и

284
00:25:35,960 --> 00:25:45,000
уже экспортирована; мы просто меняем её значение здесь, поэтому если я сохраню это и выйду, и давайте сделаем source

285
00:25:45,880 --> 00:25:52,120
bashrc, а теперь давайте перейдём куда-нибудь ещё, где у нас нет

286
00:25:53,960 --> 00:26:02,840
скрипта welcome или команды welcome, и если я введу welcome, вот пожалуйста: welcome to devops bootcamp

287
00:26:02,840 --> 00:26:09,720
и пользователь Linux, которого мы взяли из переменной окружения, так что опять PATH, или

288
00:26:09,720 --> 00:26:17,640
назначение PATH в том, что вместо того чтобы мне предоставлять полный абсолютный путь

289
00:26:17,640 --> 00:26:25,000
к своей программе вот так, я могу просто перейти куда угодно в файловой системе в командной

290
00:26:25,000 --> 00:26:32,040
строке и могу ввести просто имя программы, и она найдётся в одной из тех

291
00:26:32,040 --> 00:26:38,360
директорий, прописанных в PATH, так что это некоторые примеры применения и некоторые действительно

292
00:26:38,360 --> 00:26:45,640
важные использования переменных окружения в операционной системе, и мы будем работать

293
00:26:45,640 --> 00:26:52,760
с ними на протяжении всего нашего буткэмпа, так что вы увидите множество реальных кейсов и примеров

294
00:26:52,760 --> 00:26:59,160
где мы задаём и используем переменные окружения для разных приложений

