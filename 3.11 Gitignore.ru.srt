1
00:00:00,000 --> 00:00:09,440
Теперь посмотрим на файл .gitignore в репозиториях git.

2
00:00:09,440 --> 00:00:16,120
Когда мы создаем проект и инициализируем его как репозиторий git, мы можем добавить

3
00:00:16,120 --> 00:00:17,880
файл gitignore.

4
00:00:17,880 --> 00:00:25,640
Этот файл по сути исключает папки или файлы из проекта, чтобы они не

5
00:00:25,640 --> 00:00:29,240
отправлялись в удаленный репозиторий.

6
00:00:29,240 --> 00:00:34,800
И это такие файлы, которые, например, специфичны для вашего редактора, верно?

7
00:00:34,800 --> 00:00:39,960
Что-то, что другим разработчикам не нужно скачивать в своих проектах, верно?

8
00:00:39,960 --> 00:00:44,960
Это что-то индивидуальное для каждого разработчика и не имеет отношения к

9
00:00:44,960 --> 00:00:46,200
общему проекту.

10
00:00:46,200 --> 00:00:53,440
В моем случае, потому что я использую IntelliJ, когда я открыл проект, IntelliJ автоматически

11
00:00:53,440 --> 00:00:57,320
создал эту папку .idea, верно?

12
00:00:57,320 --> 00:01:02,640
Теперь если мои коллеги разработчики, например, используют Visual Code, а не IntelliJ, им

13
00:01:02,640 --> 00:01:05,200
очевидно не нужна эта папка, верно?

14
00:01:05,200 --> 00:01:09,400
Значит, ее не следует отправлять в репозиторий.

15
00:01:09,400 --> 00:01:15,040
Другой пример папок, которые нужно исключить, это, например, папки build.

16
00:01:15,040 --> 00:01:22,240
Когда вы собираете приложение, например, если я запускаю приложение через IntelliJ,

17
00:01:22,240 --> 00:01:24,720
он создает папку build, верно?

18
00:01:24,720 --> 00:01:31,080
И в этой папке build в основном находятся скомпилированные или транспилированные файлы и другие сгенерированные

19
00:01:31,080 --> 00:01:38,340
файлы, которые важны для локального запуска приложения, но не должны быть частью кода.

20
00:01:38,340 --> 00:01:41,920
Так как мне исключить эти файлы?

21
00:01:41,920 --> 00:01:44,440
Используя этот файл .gitignore.

22
00:01:44,440 --> 00:01:49,520
Так он и называется — .gitignore.

23
00:01:49,520 --> 00:01:53,720
И здесь я могу просто перечислить эти файлы или папки.

24
00:01:53,720 --> 00:01:56,520
Я могу указать .idea.

25
00:01:56,520 --> 00:01:57,920
То есть я хочу исключить эту папку.

26
00:01:57,920 --> 00:02:03,000
Если бы здесь была папка build, например, я бы исключил и ее.

27
00:02:03,000 --> 00:02:09,600
Теперь, прежде чем я создал этот gitignore, я фактически уже закоммитил весь код в репозиторий.

28
00:02:09,600 --> 00:02:14,440
Так что у меня уже есть эта .idea, добавленная в коммит.

29
00:02:14,440 --> 00:02:18,040
Давайте вернемся и посмотрим: она здесь.

30
00:02:18,040 --> 00:02:23,120
Поэтому я хочу удалить папку .idea из репозитория.

31
00:02:23,120 --> 00:02:27,200
И я также хочу удалить папку node_modules.

32
00:02:27,200 --> 00:02:28,200
Почему?

33
00:02:28,200 --> 00:02:33,320
Потому что это зависимости, которые каждый должен установить локально из package.json.

34
00:02:33,320 --> 00:02:37,740
Поэтому их не должно быть в удаленном репозитории, верно?

35
00:02:37,740 --> 00:02:42,920
Потому что это нужно для запуска приложения либо локально, либо на продакшен-сервере.

36
00:02:42,920 --> 00:02:45,120
И нам не нужно иметь это как часть кода.

37
00:02:45,120 --> 00:02:50,480
Поэтому я тоже исключу ее.

38
00:02:50,480 --> 00:02:58,880
А теперь, если я зайду в командную строку и вызову git status, вы увидите, что файл gitignore

39
00:02:58,880 --> 00:03:01,360
был добавлен и изменен.

40
00:03:01,360 --> 00:03:07,440
Но я также вижу измененный .idea/workspace.xml.

41
00:03:07,440 --> 00:03:08,840
Почему так?

42
00:03:08,840 --> 00:03:13,360
Ведь мы только что исключили .idea в файле gitignore, верно?

43
00:03:13,360 --> 00:03:18,800
Почему же мы видим изменения в этой папке, которые нужно закоммитить?

44
00:03:18,800 --> 00:03:25,840
Проблема в том, что поскольку мы уже закоммитили эту папку в репозиторий, git

45
00:03:25,840 --> 00:03:26,840
ее отслеживает.

46
00:03:26,840 --> 00:03:33,200
То есть каждое изменение в этой папке в любом файле отслеживается git, и он считает,

47
00:03:33,200 --> 00:03:37,240
что мы должны теперь добавить и закоммитить это изменение.

48
00:03:37,240 --> 00:03:41,560
Поэтому нам нужно сказать git: эй, забудь об этой папке.

49
00:03:41,560 --> 00:03:43,880
Мы больше не отслеживаем ее.

50
00:03:43,880 --> 00:03:47,440
Мы хотим игнорировать ее для любых действий git.

51
00:03:47,440 --> 00:03:53,180
И чтобы это сделать, нам нужно убрать его из кэша git, верно?

52
00:03:53,180 --> 00:04:01,360
Итак, git, remove, recursive, cached.

53
00:04:01,360 --> 00:04:08,040
И мы можем либо указать точку, либо реально написать имя папки.

54
00:04:08,040 --> 00:04:14,120
И вы видите, что всё внутри папки idea было удалено из кэша git.

55
00:04:14,120 --> 00:04:20,280
А теперь если я сделаю status, вы видите, git хочет удалить этот файл из удалённого репозитория.

56
00:04:20,280 --> 00:04:31,480
Так что давайте зачекинем всё, отредактируем файл gitignore.

57
00:04:31,480 --> 00:04:34,920
И если я это закоммичу или запушу.

58
00:04:34,920 --> 00:04:40,040
И теперь если я вернусь в UI и выберу ветку, потому что мы сделали все эти изменения

59
00:04:40,040 --> 00:04:46,120
в ветке, здесь видно, что папка dot idea пропала.

60
00:04:46,120 --> 00:04:57,440
Теперь можем сделать то же с node modules, git remove, cached node modules.

61
00:04:57,440 --> 00:05:02,840
И если я сделаю status, нам нужно удалить это из удалённого репозитория.

62
00:05:02,840 --> 00:05:08,440
Вообще это уже было добавлено в коммит.

63
00:05:08,440 --> 00:05:21,640
То есть удалили node modules из репозитория.

64
00:05:21,640 --> 00:05:26,920
И если я это запушу и перезагружу, node modules тоже исчезнут.

65
00:05:26,920 --> 00:05:30,560
Конечно, они остаются в локальной папке.

66
00:05:30,560 --> 00:05:35,960
У меня здесь node modules и dot idea, но git их больше не отслеживает.

67
00:05:35,960 --> 00:05:39,020
Потому что мы исключили их в gitignore.

68
00:05:39,020 --> 00:05:43,480
Но поскольку я уже добавлял их в удалённый репозиторий, мне пришлось убрать это из

69
00:05:43,480 --> 00:05:49,680
кэша, чтобы git удалил всё полностью, вместе со старым трекингом.

70
00:05:49,680 --> 00:05:55,680
И мы можем сделать то же самое с файлом dot ds store, это специфичный для macOS файл, который хранит

71
00:05:55,680 --> 00:05:59,120
некоторые метаданные о вашей локальной папке, по сути.

72
00:05:59,120 --> 00:06:03,520
Так что, конечно, он не нужен в коде и его не нужно делиться с другими разработчиками

73
00:06:03,520 --> 00:06:04,720
в команде.

74
00:06:04,720 --> 00:06:07,480
Он специфичен для вашего локального окружения.

75
00:06:07,480 --> 00:06:11,120
Так что давайте тоже добавим его в файл gitignore.

76
00:06:11,120 --> 00:06:15,480
И поскольку это файл, а не директория, мы просто пишем здесь имя файла.

77
00:06:15,480 --> 00:06:18,960
Теперь я переключусь обратно в окно терминала.

78
00:06:18,960 --> 00:06:23,400
И мы сначала удалим этот файл из кэша, потому что он уже был закоммичен

79
00:06:23,400 --> 00:06:25,080
и запушен в репозиторий.

80
00:06:25,080 --> 00:06:29,240
Так что мы уберём его из кэша и затем закоммитим наши изменения с коммитом

81
00:06:29,240 --> 00:06:35,520
"removed ds store file", и давайте запушим это.

82
00:06:35,520 --> 00:06:37,680
Теперь я вернусь в браузер.

83
00:06:37,680 --> 00:06:43,000
И если я обновлю страницу, мы увидим, что файл тоже был удалён из нашего удалённого

84
00:06:43,000 --> 00:06:44,720
репозитория.

85
00:06:44,720 --> 00:06:49,960
И как я говорил, в большинстве проектов, где вы работаете с каким-то редактором и

86
00:06:49,960 --> 00:06:55,600
запускаете приложение локально, появляются такие сгенерированные папки, как build и node

87
00:06:55,600 --> 00:07:01,960
modules или dot idea, или для Java, например, другие сгенерированные папки.

88
00:07:01,960 --> 00:07:06,160
Так что в большинстве проектов вам понадобится файл gitignore.

