1
00:00:00,000 --> 00:00:08,360
Обычная практика при работе с кодом в Git – когда разработчик заканчивает работу над фичей

2
00:00:08,360 --> 00:00:15,820
реализацией или исправлением бага, другой разработчик проверяет изменения перед слиянием в master.

3
00:00:15,820 --> 00:00:18,720
Потому что мы сказали, что master должен быть защищен.

4
00:00:18,720 --> 00:00:27,640
Он должен быть в состоянии, про которое все знают, что оно протестировано и может быть развернуто в продакшен в любой момент

5
00:00:27,640 --> 00:00:33,340
и по возможности не содержит наполовину реализованных или сломанных вещей.

6
00:00:33,340 --> 00:00:39,320
Чаще всего это нужно, когда реализация фичи потребовала много изменений кода, или, возможно, вы

7
00:00:39,320 --> 00:00:44,040
работаете с младшим разработчиком в команде, или, может быть, бэкенд-разработчик изменил что-то во

8
00:00:44,040 --> 00:00:50,560
фронтенд-коде или наоборот; у вас есть разработчики, которые помогают и проверяют код друг друга, верно?

9
00:00:50,560 --> 00:00:56,360
Так что, возможно, сеньор проверяет код джуниора, пока тот не будет слит

10
00:00:56,360 --> 00:01:01,360
в master, или фронтенд-разработчик или эксперт проверяет, что бэкенд-разработчик внес

11
00:01:01,360 --> 00:01:04,080
изменения во фронтенде правильно.

12
00:01:04,080 --> 00:01:10,200
И если нет, это отличная возможность разработчикам учиться и расти друг у друга и на

13
00:01:10,200 --> 00:01:12,020
основе взаимной экспертизы.

14
00:01:12,020 --> 00:01:17,560
Они могут предложить, как сделать лучше, или, возможно, найти серьезную ошибку

15
00:01:17,560 --> 00:01:23,240
самостоятельно и сказать другому разработчику, как ему улучшить код, или, может быть, написать

16
00:01:23,240 --> 00:01:25,400
код более чисто.

17
00:01:25,400 --> 00:01:28,880
И, конечно, это помогает коду оставаться чистым.

18
00:01:28,880 --> 00:01:33,340
И никакие серьезные ошибки не попадают в ветку master.

19
00:01:33,340 --> 00:01:38,520
То есть есть некая проверка перед добавлением изменений в ветку master.

20
00:01:38,520 --> 00:01:43,400
И способ сделать это — использовать pull request.

21
00:01:43,400 --> 00:01:45,680
Это очень простой концепт.

22
00:01:45,680 --> 00:01:50,720
Например, допустим, я работаю в своей feature-ветке и только что завершил

23
00:01:50,720 --> 00:01:55,480
реализацию: подключение к базе готово, и все работает.

24
00:01:55,480 --> 00:02:00,200
Я протестировал это локально и думаю, что оно готово.

25
00:02:00,200 --> 00:02:04,800
Значит, пора сливать это в master, верно?

26
00:02:04,800 --> 00:02:09,960
Чтобы это сделать, я создам pull request, который другой разработчик в

27
00:02:09,960 --> 00:02:17,760
моей команде, возможно с большим опытом в настройке подключения к базе, сможет просмотреть и одобрить,

28
00:02:17,760 --> 00:02:20,960
что его можно слить в master.

29
00:02:20,960 --> 00:02:26,200
Чтобы это сделать, нужно вернуться и открыть ветки.

30
00:02:26,200 --> 00:02:30,540
Возле feature-ветки здесь я вижу merge request.

31
00:02:30,540 --> 00:02:37,320
И здесь я вижу, что в этой feature-ветке есть одно изменение или один коммит, который

32
00:02:37,320 --> 00:02:39,360
отличается от master, верно?

33
00:02:39,360 --> 00:02:47,640
Допустим, я сделал еще одно изменение; давайте снова поменяем тут какую-нибудь мелочь.

34
00:02:48,640 --> 00:02:51,560
Не так важно, что я меняю.

35
00:02:51,560 --> 00:03:00,360
Просто хочу сделать новый коммит.

36
00:03:00,360 --> 00:03:08,320
И теперь, если я запушу изменения и обновлю здесь, я вижу два коммита.

37
00:03:08,320 --> 00:03:13,960
Значит, в этой feature-ветке два изменения, которых нет в master.

38
00:03:13,960 --> 00:03:17,360
Это нужно слить, так сказать.

39
00:03:17,360 --> 00:03:20,600
Что же такое первое число здесь?

40
00:03:20,600 --> 00:03:26,200
Это изменения, которые есть в master, но которых нет в моей feature-ветке, верно?

41
00:03:26,200 --> 00:03:29,960
Потому что, очевидно, может случиться, что другой разработчик закончил багфикс.

42
00:03:29,960 --> 00:03:34,760
Они сливают свои изменения в master, а у меня их еще нет, так?

43
00:03:34,760 --> 00:03:39,960
Так что теперь в ветке master есть изменения, которых нет в моей feature-ветке, и наоборот

44
00:03:39,960 --> 00:03:41,320
тоже верно.

45
00:03:41,320 --> 00:03:44,000
В моей feature-ветке есть изменения, которых нет в master.

46
00:03:44,000 --> 00:03:49,280
Чтобы создать pull request или merge request — на самом деле это называется по-разному

47
00:03:49,280 --> 00:03:53,960
в разных репозиториях; это может называться либо merge request, либо pull request.

48
00:03:53,960 --> 00:03:56,360
В GitLab это merge request.

49
00:03:56,360 --> 00:04:01,600
Если я нажму на него, здесь видно, что feature-ветка будет слита в ветку master, что

50
00:04:01,600 --> 00:04:03,280
как раз то, что нам нужно.

51
00:04:03,280 --> 00:04:09,040
Здесь мы можем добавить заголовок или описание того, что именно содержит ветка.

52
00:04:09,040 --> 00:04:13,480
Затем вы можете назначить ее одному из разработчиков в команде для утверждения.

53
00:04:13,960 --> 00:04:18,920
Здесь же вы можете выбрать кого-то в качестве ревьюера вашего кода, или можете оставить

54
00:04:18,920 --> 00:04:20,640
их обоих неназначенными.

55
00:04:20,640 --> 00:04:26,840
Работает это так: вы можете знать, что кто-то в команде обладает экспертизой именно

56
00:04:26,840 --> 00:04:31,720
в области, над которой вы работали, поэтому можете назначить это тому человеку.

57
00:04:31,720 --> 00:04:37,400
Или если вы считаете, что любой может сделать код-ревью, вы можете оставить его неназначенным и отправить

58
00:04:37,400 --> 00:04:38,600
merge request.

59
00:04:38,600 --> 00:04:42,600
И теперь другой разработчик увидит ваш merge request и увидит изменения, которые

60
00:04:42,600 --> 00:04:43,600
вы сделали.

61
00:04:43,600 --> 00:04:45,920
Вы увидите коммиты, возможно, отдельно.

62
00:04:45,920 --> 00:04:48,160
Снова отмечу, есть разные интерфейсы.

63
00:04:48,160 --> 00:04:52,960
Здесь это выглядит иначе в Bitbucket, например, или в GitHub.

64
00:04:52,960 --> 00:04:58,040
Но есть две вещи, которые вы можете сделать, когда merge request назначен вам.

65
00:04:58,040 --> 00:05:02,520
Первая — одобрить или отклонить merge request.

66
00:05:02,520 --> 00:05:08,240
Например, если вы считаете, что с этими изменениями что-то не так, к примеру,

67
00:05:08,240 --> 00:05:12,000
вы думаете, что это неверное изменение, тогда вы можете добавить комментарии.

68
00:05:12,000 --> 00:05:17,280
По сути, как ревьюер, вы здесь ничего не меняете и сами проблемы не исправляете.

69
00:05:17,280 --> 00:05:22,720
Вы оставляете комментарии, чтобы человек, который это реализовал, мог извлечь уроки.

70
00:05:22,720 --> 00:05:25,480
Именно в этом и заключается идея.

71
00:05:25,480 --> 00:05:30,480
Так человек, который допустил эти ошибки, может научиться на них, а вы фактически даете ему

72
00:05:30,480 --> 00:05:33,040
некоторые предложения и замечания.

73
00:05:33,040 --> 00:05:38,760
В таком случае вы можете отклонить merge request, затем разработчик вернется

74
00:05:38,760 --> 00:05:45,360
и внесет изменения на основе вашего предложения, а затем снова создаст pull request.

75
00:05:45,360 --> 00:05:51,080
И когда всё выглядит нормально, вы можете его одобрить и также смержить.

76
00:05:51,080 --> 00:05:58,280
Если я нажму merge, изменения будут слиты в master.

77
00:05:58,280 --> 00:06:08,640
Если я вернусь в репозиторий, здесь вы увидите, что изменения уже в master, что означает,

78
00:06:08,640 --> 00:06:09,920
слияние завершено.

